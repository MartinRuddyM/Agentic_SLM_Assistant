interaction_summary: >
  A Q&A conversation between the user and an expert is taking place.
  Below is the last Question and its corresponding expert answer.

  Task:

  Create a SHORT **one-paragraph** summary of what the Q&A interaction was about.
  Include within the paragraph all relevant technical keywords, 
  and keep a mention of all important things related to the user context and situation.
  Do not mention the fact that you are making a summary. ONLY write the summary itself.

  Question & Answer to summarize:

  {interaction}


  ONE-PARAGRAPH SHORT SUMMARY:


last_n_summary: >
  There was a Q&A conversation between a user and an expert. 
  Given these questions and answers found in the conversation, 
  generate a **one-paragraph** summary of what the conversation was about.
  Include within the paragraph all relevant technical keywords, 
  and keep a mention of all important things related to the user context and situation.
  Do not mention the fact that you are making a summary. ONLY write the summary itself.

  CONVERSATION:

  {conversation_text}


  SUMMARY OF CONVERSATION:


final_summary: >
  There was a Q&A conversation between the user and an expert.
  Below are summaries from all Q&As of the conversation.
  Generate an overall, final **one-paragraph** conversation summary.
  Include within the paragraph all relevant technical keywords and details from the user mentioned.
  Do not mention the fact that you are making a summary. ONLY write the final summary itself.

  Partial summaries of the sections of the conversation:

  {partial_summaries}

  FINAL ONE-PARAGRAPH SUMMARY:



extract_permanent_user_info: |
  There has been a conversation between an expert LLM and the user.
  Below is the list of questions and prompts that the user has asked during the conversation.
  We want to personalise the service so we need to identify personal information about the user.
  It's like a marketing agency trying to store key personal information for sales and customer satisfaction.
  Look at the list of questions and prompts and focus on personal characteristics about the user or his/her life,
  things that are relevant for a Question & Answer service to know.
  Return a list of ONE-SENTENCE STATEMENTS about VERY IMPORTANT information that the user reveals. Use simple, plain English in second person.
  If there is no relevant information leave it empty.
  There is an example below. You should return a JSON format like the following cotaining the most relevant information:

  EXAMPLE USER QUESTIONS:
  I am doing a project with AutoCAD. How can I copy an existant line and paste it in parallel with sale of 2x?
  
  The program is not letting me fill an area with colour.
  
  Okay, so I closed the line and now it is working, thank you. Now let's work on another project writing my kitchen book. Can you expand on the idea of desset recipies made of wild berries from Germany?
  
  What program can I use to add photos into the book's chapters?
  
  How to increase the length of inserted photos.
  
  Increase brightness and edit with some template. Have any template ideas?
  
  Oh yes, I meant filters instead of templates. Then which filters would you recommend?
  
  Allright, I tried a few and now I found a good one. Now tell me, is there any more advanced software that I can use to edit the images? This seems a bit too basic.
  
  I can't install the software needed for the image, it says: Software not commpatible with your system.
  
  I checked the setting and I am running on Windows 64 bits.
  
  Okay how can I share the current version of the work? My niece is coming tomorrow and I want to show her in advance, she really likes photography.
  
  I tried the share button but it's now working. Should I try with my Gmail account instead of Facebook?
  
  Thank you
  

  EXAMPLE OUTPUT WITH KEY INFORMATION FOR A PERSONALIZED Q&A SYSTEM TO KNOW:
  {
  "items": [
    "1. The user does projects with AutoCAD",
    "2. The user is writing a kitchen book",
    "3. The user has a Windows operative system of 64 bits",
    "4. The user has a female niece",
    "5. The user's female niece loves photography",
    "6. The user uses Facebook",
    "7. The user has a Gmail account"
  ]
  }


  Notice how unimportant tasks or intermediate steps are left behind. Focus only on the most important personal information about the user, which could be useful to help in another Q&A session.

  Now search for the most important user details and list them in JSON format, if any.

  USER QUESTIONS:

  {user_questions}

  KEY INFORMATION STATEMENTS IN JSON FORMAT:
  
  

personalize_final_asnwer: >
  You are a marketing expert trying to make the customer happy with our Q&A system experience.
  An expert system has written an answer to the user's question. Below you can find the user question,
  the system's answer, and also some relevant contextual USER INFO and summaries of PREVIOUS CONVERSATIONS
  that the system previously had with the same user.

  Your should make the user feel welcome and have a personalized experience. You should make them feel
  like we know them personally. Your task is to rewrite the system's answer by adding references to
  the contextual USER INFO we have as well as to previous conversations, if you deem it necessary.
  The goal is to make them feel like we remember about their past queries and make them feel like we
  know them.

  You should try to put some reference at the beginning to the user info, and some at the end. In the
  middle of the answer, you can insert references to previous conversations. Do not modify the previous
  answer's meaning or examples, just change a bit the format to add personalization into it.
  Also at the end add one sentence of suggestions of how to help next.

  This is the personal user info:

  {user_info}


  This is summaries from previous conversations:

  {conversation_summaries}


  This is a summary of the last Q&A interactions just before this query, for conversational context:
  
  {interactions_summary}


  This is the original user query so you have context:

  {query}


  This is the expert Q&A answer:

  {answer}


  Now rewrite the system's answer addressing the user, and personalize it a bit with the inormation provided.

  Personalized answer:


contrast_user_information: |
  You are given a list of existing statements about a user in an information marketing DB.
  You are also given a suggestion of new found statements that are being considered to add into the DB.
  Task: Go through the NEW STATEMENTS and decide which of them are TRULY NEW, that is, they were not included in the original list of information.
  In your answer, write all of the NEW STATEMENTS that are TRULY NEW, NOT REPEATED.
  If in doubt of whether it is truly new, do not include it (do not write it).
  Answer in JSON format.

  Example 1:

  Original statements:
  The user plays Minecraft.
  The user has a Microsoft Windows OS.
  The user lives in Valencia.
  The user studies in University.
  The user plays football.
  The user does not like spicy food.

  Possible new statements:
  Andrew frequently attends to basketball matches.
  The user has a Windows laptop.
  Andrew dislikes hot food.
  Andrew plays Minecraft on weekends.

  Truly new statements in JSON format:
  {
  "items": [
    "1. The user frequently attends to baasketball matches."
  ]
  }

  Example 2:

  Original statements:
  The user likes sewing.
  The user's favourtie color is purple.
  The user likes dark blue color.
  The user is inspired by modern art.
  The user is allergic to cinammon.

  Possible new statements:
  Roxie studies in Beijing University.
  Roxie prefers dark blue for art projects.
  She has strong allergic reactions to cinammon.
  She has coursework on graphic pencil design.

  Truly new statements in JSON format:
  {
  "items": [
    "1. The user studies in Beijing University.",
    "2. The user has coursework on graphic pencil design.",
  ]
  }

  Example 3:

  Original statements:
  The user is interested in getting a US visa.
  The user is a citizen of Chile.
  The user did a trip through Europe.

  Possible new statements:
  The user reads information of travelling and relocating to the United States.
  The user lives in Chile.

  Truly new statements in JSON format:
  {
  "items": [
  ]
  }

  Now provide the truly new statements for the user below.

  Original statements:
  {original_statements}

  Possible new statements:
  {new_statements}
  Truly new statements in JSON format:


feed_to_react: |
  This is my question:
  {query}

  For answering my question, remember that we have spoken before in this conversation. Below you can find
  a summary of the last interactions we had, so you can give a contextually appropiate answer.

  Summaries of past messages of this conversation (if any):

  {past_messages}

  Also, here is some contextual information of me as a user. This might be relevant to your answer and help
  you to decide how to approach it.

  Useful user info for the answer:

  {user_info}

  Now please answer my original question. Remember the question:

  {query}

  Your answer:


code_tool_description: >
  Useful to do operations and advanced analysis that python conde and libraries can help with.
  If you have math operations, statistics assignments, or any codeable task, use this tool.

  How to use it: 

  Write a description of the task to be done. An expert coder system will generate and run the code
  as per your description. Give a detailed description of the task to give them context.
  
  The output of the tool will be what the code can print(), so structure the task
  properly so it can be printed. The expert system will read your description, write code,
  and run it and return the printed answer.

code_task_description: >
  You are an AI that generates Python code. Omit explanations.
  Respond with only the Python code needed for the task. PRINT the results that will answer the task.
  **Only printed results are valid to answer the task**.

  Task:

  {task_description}

  Your python code:

code_tool_error: >
  Max retries reached. Unable to generate working code. Please try with a different, better description, or with another tool.


web_search_tool_description: >
  Useful to search the web. All information that you don't know or are not sure about, but need for the
  answer, use this tool. Use this tool to get information on current events, weather information,
  what time and date it is, and anything that the internet can be used for.

  How to use it:

  Provide as INPUT a VERY SHORT SENTENCE of the search terms to be used. The web_search tool will return a
  digested result. The words you write are the search terms themselves, so ONLY WRITE VERY IMPORTANT
  WORDS as INPUT. Think of how an expert SEO marketer would do search queries online. ONLY WRITE
  VERY FEW KEY SEARCH TERMS.

web_search_summarize_findings: >
  A web search has been performed and some results have appeared.
  The original user query that we are trying to solve with this searchings is this:

  Original user query:

  {query}


  The search terms that were used in the search:

  {search_terms}

  
  Given the search results below, summarize the findings of each of the results according
  to the user query. Make a lengthy summary of each of the results by keeping all information
  that could be related to the user query. Do not include information that is clearly irrelevant to
  answer the query or the search terms. For the relevant information, keep all of it, and repect it
  leave it as it is.

  SEARCH RESULTS:

  {search_results}


  YOUR LENGTHY SUMMARY OF IMPORTANT INFORMATION:


web_search_tool_error: >
  No valid search results were found. Some error happened in search tool.


react_prompt: |
  Answer the following questions as best you can. You have access to the following tools:

  {tools}

  Use the following format:

  Question: the input question you must answer  
  Thought: you should always think about what to do  
  Action: the action to take, should be one of [{tool_names}]  
  Action Input: the input to the action  
  Observation: the result of the action  
  ... (this Thought/Action/Action Input/Observation can repeat N times)  
  Thought: I now know the final answer  
  Final Answer: the final answer to the original input question

  Begin!

  Question: {input}  
  Thought:{agent_scratchpad}



